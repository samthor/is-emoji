<script type="module">

import * as encoding from './src/encoding.js';
import * as variants from './src/variants.js';

// import {emojiPointCount} from './src/emoji.js';
// import {countRenderPoints, isSingleValidEmoji, isSingleAmbig} from './src/measurer.js';

// import isExpectedLength from './index.js';  // use default import

// ambig.textContent = `ambig=${isSingleAmbig}`;

function renderVariants(object) {
  if (object === null) {
    return '';
  }
  const enc = (key) => `${key} ${encoding.single(object[key])}`;
  return Object.keys(object).map(enc).join(', ');
}

text.oninput = () => {
  const r = text.value;
  if (!r) {
    out.textContent = '';
    return;
  }
  const enc = encoding.split(r)[0];

  const base = variants.singleBase(enc);
  const v = `base: ${encoding.single(base)}
tone: ${variants.supportsTone(base) ? (variants.supportsDoubleTone(base) ? 'double' : 'yes') : 'no'}
variants: ${renderVariants(variants.genderVariants(base))}`;
  out.textContent = v;
};

text.value = '➡️';
text.oninput();

</script>

<input type="text" id="text" />
<pre id="out"></pre>
